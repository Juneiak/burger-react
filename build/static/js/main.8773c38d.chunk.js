(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{101:function(e,t,n){e.exports={modalOverlay:"modal-overlay_modalOverlay__qhBq8"}},102:function(e,t,n){e.exports={main:"order-info-page_main__eRfnv"}},103:function(e,t,n){e.exports={main:"constructor-page_main__34Uax"}},105:function(e,t,n){e.exports={ingredient:"filling_ingredient__BTLzX"}},106:function(e,t,n){e.exports={list:"order-card-list_list__3bxhW"}},107:function(e,t,n){e.exports={main:"ingredient-details-page_main__3096E"}},11:function(e,t,n){e.exports={main:"feed-page_main__YYQve",title:"feed-page_title__2_YE2",grid:"feed-page_grid__1VTGW",orderList:"feed-page_orderList__2NjUA",ordersInfo:"feed-page_ordersInfo__34Ldz",statusLists:"feed-page_statusLists__3Pefp",statusList:"feed-page_statusList__3D2tO",orderId:"feed-page_orderId__1NvS5",stats:"feed-page_stats__3dOFK",number:"feed-page_number__3mjto"}},115:function(e,t,n){},13:function(e,t,n){e.exports={header:"app-header_header__1iHLW",menu:"app-header_menu__3SLom",logo:"app-header_logo__zVEfY",profile:"app-header_profile__2xjkN",link:"app-header_link__2y8TU",menuList:"app-header_menuList__7wAoR",activeProfileLink:"app-header_activeProfileLink__z79q0"}},189:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Yt}));var r=n(1),c=n.n(r),a=n(31),i=n.n(a),s=(n(115),n(40)),o=n(194),l=n(108),d=n(7),u=n(98),j=n(25),m=n(80),_=n(4),b="SET_INGREDIENTS_LIST",x="SET_INGREDIENTS_LIST_IS_LOADING",p="SET_INGREDIENTS_LIST_IS_ERROR",f="SELECT_INGREDIENT",O="REMOVE_SELECTED_INGREDIENT",h="UPDATE_SELECTED_INGREDIENT",g="ADD_INGREDIENT_INTO_CONSTRUCTOR",v="REMOVE_INGREDIENT_FROM_CONSTRUCTOR",N="CLEAR_CONSTRUCTOR",y="SET_USER",I="REMOVE_USER",C="WS_CONNECTION_START",E="WS_CONNECTION_ERROR",S="WS_CONNECTION_SUCCESS",L="WS_GET_ORDERS",T="WS_CONNECTION_CLOSED",k="WS_SEND",R="SELECT_ORDER",D="REMOVE_SELECTED_ORDER",w="GET_ORDER_DETAILS",B="CLEAR_ORDER_DETAILS",P={ingredientsList:[],ingredientListIsLoaded:!1,ingredientListIsError:!1,selectedIngredient:{},constructorList:[],selectedBun:{}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(_.a)(Object(_.a)({},e),{},{ingredientsList:t.data,ingredientListIsLoaded:!0,ingredientListIsError:!1});case x:return Object(_.a)(Object(_.a)({},e),{},{ingredientListIsLoaded:!1});case p:return Object(_.a)(Object(_.a)({},e),{},{ingredientListIsLoaded:!0,ingredientListIsError:!0});case g:if("bun"===t.ingredientType){var n=e.ingredientsList.find((function(e){return e._id===t.id}));return Object(_.a)(Object(_.a)({},e),{},{selectedBun:n||{}})}var r=e.ingredientsList.find((function(e){return e._id===t.id}));return r?Object(_.a)(Object(_.a)({},e),{},{constructorList:[].concat(Object(m.a)(e.constructorList),[r])}):e;case v:return Object(_.a)(Object(_.a)({},e),{},{constructorList:e.constructorList.filter((function(e,n){return n!==t.index}))});case h:for(var c=e.constructorList,a=t.toInsertIndex,i=t.toRemoveIndex,s=c[i],o=a<i?-1:1,l=i;l!==a;l+=o)c[l]=c[l+o];return c[a]=s,Object(_.a)(Object(_.a)({},e),{},{constructorList:Object(m.a)(c)});case N:return Object(_.a)(Object(_.a)({},e),{},{constructorList:[],selectedBun:{}});case f:var d=e.ingredientsList.find((function(e){return e._id===t.id}));return d?Object(_.a)(Object(_.a)({},e),{},{selectedIngredient:d}):e;case O:return Object(_.a)(Object(_.a)({},e),{},{selectedIngredient:{}});default:return e}},z={user:{}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:var n=Object(_.a)(Object(_.a)({},e),{},{user:t.data});return n;case I:return Object(_.a)(Object(_.a)({},e),{},{user:{}});default:return e}},U={orderDetails:{},selectedOrder:{}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(_.a)(Object(_.a)({},e),{},{selectedOrder:t.data});case D:return Object(_.a)(Object(_.a)({},e),{},{selectedOrder:{}});case w:return Object(_.a)(Object(_.a)({},e),{},{orderDetails:t.orderDetails});case B:return Object(_.a)(Object(_.a)({},e),{},{orderDetails:{}});default:return e}},G={wsConnected:!1,ordersInfo:{},error:""},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(_.a)(Object(_.a)({},e),{},{error:t.payload.message,wsConnected:!1});case S:return Object(_.a)(Object(_.a)({},e),{},{wsConnected:!0,error:""});case L:return Object(_.a)(Object(_.a)({},e),{},{wsConnected:!0,error:"",ordersInfo:t.payload});case T:return Object(_.a)(Object(_.a)({},e),{},{wsConnected:!1,error:""});default:return e}},X=Object(j.b)({index:A,auth:M,order:F,ws:J}),V=function(e){return{type:C,wsUrl:e}},W=function(){return function(e){var t=null;return function(n){return function(r){var c=e.dispatch,a=r.type,i=r.payload;if(a===C&&(t=new WebSocket(r.wsUrl)),t&&(t.onopen=function(e){c(function(e){return{type:S,payload:e}}(e))},t.onerror=function(e){c(function(e){return{type:E,payload:e}}(e))},t.onclose=function(e){c(function(e){return{type:T,payload:e}}(e))},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);c(function(e){return{type:L,payload:e}}(n))},a===k)){var s=i;t.send(JSON.stringify(s))}n(r)}}}},H=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):j.c)(Object(j.a)(u.a,W())),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(j.d)(X,e,H);return t},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},Y=n(9),Z=n(99),q=n.n(Z),$=n(3),ee=n(13),te=n.n(ee),ne=n(0);function re(){return Object(ne.jsxs)("header",{className:"".concat(te.a.header," pb-4 pt-4"),children:[Object(ne.jsx)("nav",{className:te.a.menu,children:Object(ne.jsxs)("ul",{className:te.a.menuList,children:[Object(ne.jsx)("li",{className:te.a.listItem,children:Object(ne.jsxs)(d.d,{exact:!0,to:"/",className:"".concat(te.a.link," p-5 mr-2"),activeClassName:te.a.activeProfileLink,children:[Object(ne.jsx)($.BurgerIcon,{type:"secondary"}),Object(ne.jsx)("p",{style:{color:"inherit"},className:"text text_type_main-default text_color_inactive ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(ne.jsx)("li",{className:te.a.listItem,children:Object(ne.jsxs)(d.d,{exact:!0,to:"/feed",className:"".concat(te.a.link," p-5 mr-2"),activeClassName:te.a.activeProfileLink,children:[Object(ne.jsx)($.BurgerIcon,{type:"secondary"}),Object(ne.jsx)("p",{style:{color:"inherit"},className:"text text_type_main-default text_color_inactive ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]})}),Object(ne.jsx)("div",{className:te.a.logo,children:Object(ne.jsx)($.Logo,{})}),Object(ne.jsx)("div",{className:te.a.profile,children:Object(ne.jsxs)(d.d,{to:"/profile",className:"".concat(te.a.link," p-5"),activeClassName:te.a.activeProfileLink,children:[Object(ne.jsx)($.ProfileIcon,{type:"secondary"}),Object(ne.jsx)("p",{style:{color:"inherit"},className:"text text_type_main-default ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})}var ce=n(74),ae=n.n(ce),ie=n(100),se=n(5),oe=n(109),le="https://norma.nomoreparties.space/api",de="https://norma.nomoreparties.space/api/auth";function ue(e){return e.ok?e.json().then((function(e){return e.success?e:Promise.reject(e)})):Promise.reject(e)}function je(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}r&&r.toUTCString&&(n.expires=r.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var i in n){a+="; "+i;var s=n[i];!0!==s&&(a+="="+s)}document.cookie=a+"; path=/"}function me(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var _e=function(e){return e.split("Bearer ")[1]},be=function(e,t){return fetch(e,t).then(ue).catch((function(n){return"jwt expired"===n.message||403===n.status?function(){var e=localStorage.getItem("Rtoken");return e?fetch("".concat(de,"/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then(ue).then((function(e){return je("Atoken",_e(e.accessToken)),localStorage.setItem("Rtoken",e.refreshToken),e})).catch((function(e){return Promise.reject("refresh error")})):Promise.reject("Rtoken issue")}().then((function(n){return t.headers.Authorization="Bearer "+me("Atoken"),fetch(e,t)})).then(ue):Promise.reject(n)}))},xe=function(e){return{type:y,data:e}},pe=function(){return function(e){var t=localStorage.getItem("Rtoken");return t?fetch("".concat(de,"/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}).then(ue).then((function(t){console.log(t.message),e({type:I}),localStorage.removeItem("Rtoken"),je("Atoken",null,{expires:-1})})).catch((function(e){return console.error(e)})):(console.error("you have already logut"),Promise.reject())}},fe=function(){return function(e){return be("".concat(de,"/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(me("Atoken"))}}).then((function(t){return e(xe(t.user)),t})).catch((function(e){return console.error(e)}))}},Oe=function(){return Object(s.b)()},he=s.c,ge=["children"],ve=function(e){var t=e.children,n=Object(oe.a)(e,ge),r=c.a.useState(!1),a=Object(se.a)(r,2),i=a[0],s=a[1],o=Oe(),l=he((function(e){return e.auth.user}));function d(){return(d=Object(ie.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(fe());case 2:s(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.useEffect((function(){!function(){d.apply(this,arguments)}()}),[]),i?Object(ne.jsx)(Y.b,Object(_.a)(Object(_.a)({},n),{},{render:function(e){var n=e.location;return l.name?t:Object(ne.jsx)(Y.a,{to:{pathname:"/login",state:{from:n}}})}})):null},Ne=n(41),ye=n.n(Ne),Ie=function(){var e=he((function(e){return e.index.selectedIngredient}));return(null===e||void 0===e?void 0:e._id)?Object(ne.jsxs)("div",{className:ye.a.content,children:[Object(ne.jsx)("h2",{className:"".concat(ye.a.title," text text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(ne.jsx)("img",{src:e.image,alt:e.name,className:"".concat(ye.a.image," text text_type_main-large mb-4")}),Object(ne.jsx)("p",{className:"mb-8 text text_type_main-medium",children:e.name}),Object(ne.jsxs)("ul",{className:ye.a.nutrients,children:[Object(ne.jsxs)("li",{className:"mr-5",children:[Object(ne.jsx)("p",{className:"text mb-2 text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(ne.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:e.calories})]}),Object(ne.jsxs)("li",{className:"mr-5",children:[Object(ne.jsx)("p",{className:"text mb-2 text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(ne.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:e.proteins})]}),Object(ne.jsxs)("li",{className:"mr-5",children:[Object(ne.jsx)("p",{className:"text mb-2 text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(ne.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:e.fat})]}),Object(ne.jsxs)("li",{className:"mr-5",children:[Object(ne.jsx)("p",{className:"text mb-2 text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(ne.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:e.carbohydrates})]})]})]}):null},Ce=n(75),Ee=n.n(Ce),Se=n(101),Le=n.n(Se),Te=document.querySelector("#react-modals"),ke=function(e){var t=e.children,n=e.onClose;return Te?i.a.createPortal(Object(ne.jsx)("div",{onClick:function(e){e.target===e.currentTarget&&n()},className:Le.a.modalOverlay,children:t}),Te):null},Re=function(e){var t=e.onClose,n=e.isOpen,r=e.children;return c.a.useEffect((function(){function e(e){"Escape"===e.key&&t()}return n&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n]),Object(ne.jsx)(ke,{onClose:t,children:Object(ne.jsxs)("section",{className:"".concat(Ee.a.modal," pt-10 pr-10 pl-10 pb-15"),children:[Object(ne.jsx)("button",{onClick:t,className:Ee.a.closeButton,children:Object(ne.jsx)($.CloseIcon,{type:"primary"})}),r]})})},De=function(e){return{type:f,id:e}},we=function(){return{type:O}},Be=function(){return function(e){return e({type:x}),fetch("".concat(le,"/ingredients")).then(ue).then((function(t){return e(function(e){return{type:b,data:e}}(t.data)),t})).catch((function(t){return console.error(t),e({type:p}),Promise.reject("ingredients loading error")}))}},Pe=n(20),Ae=n.n(Pe),ze=function(){var e=c.a.useState(),t=Object(se.a)(e,2),n=t[0],r=t[1],a=he((function(e){return{selectedOrder:e.order.selectedOrder}})).selectedOrder,i=a.totalPrice,s=a.selectedIngredients,o=a.name,l=a.number,d=a.status,u=a.createdTime;return c.a.useEffect((function(){var e=[];s.forEach((function(t){var n;n=t,e.find((function(e){return n._id===e._id}))||e.push(t)})),r(e.map((function(e){return"bun"===e.type?e.amount=2:e.amount=s.filter((function(t){return t._id===e._id})).length,e})))}),[s]),Object(ne.jsxs)("div",{className:Ae.a.content,children:[Object(ne.jsx)("p",{className:"text text_type_digits-default mb-10",children:"#".concat(l)}),Object(ne.jsxs)("div",{className:Ae.a.about,children:[Object(ne.jsx)("h3",{className:"text text_type_main-medium mb-3",children:o}),Object(ne.jsx)("p",{style:{color:"done"===d?"#fff":"#00CCCC"},className:"text text_type_main-default mb-15",children:"done"===d?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}),Object(ne.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"})]}),Object(ne.jsx)("ul",{className:Ae.a.ingredientsList,children:n&&n.map((function(e,t){return Object(ne.jsxs)("li",{className:Ae.a.ingredient,children:[Object(ne.jsxs)("div",{className:Ae.a.info,children:[Object(ne.jsx)("img",{src:e.image,className:Ae.a.image}),Object(ne.jsx)("p",{className:"text text_type_main-default ml-4",children:e.name})]}),Object(ne.jsxs)("div",{className:"".concat(Ae.a.price," ml-4"),children:[Object(ne.jsx)("p",{className:"".concat(Ae.a.total," text text_type_digits-default"),children:"".concat(e.amount," x ").concat(e.price)}),Object(ne.jsx)($.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(ne.jsxs)("div",{className:Ae.a.footer,children:[Object(ne.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:u}),Object(ne.jsxs)("div",{className:Ae.a.price,children:[Object(ne.jsx)("p",{className:"".concat(Ae.a.total," text text_type_digits-default"),children:i}),Object(ne.jsx)($.CurrencyIcon,{type:"primary"})]})]})]})},Me=n(102),Ue=n.n(Me),Fe=function(e){return{type:R,data:e}},Ge=function(){return function(e){e({type:N}),e({type:B})}},Je=function(e){return function(t){fetch("".concat(le,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(me("Atoken"))},body:JSON.stringify({ingredients:e})}).then(ue).then((function(e){t(function(e){return{type:w,orderDetails:e}}(e))})).catch((function(e){return console.error(e)}))}};function Xe(){var e=Oe(),t=Object(Y.j)("/feed/:id"),n=he((function(e){return e.index.ingredientsList})),r=he((function(e){return e.order.selectedOrder})),a=he((function(e){return{ordersInfo:e.ws.ordersInfo}})).ordersInfo.orders,i=void 0===a?[]:a,s=Object(Y.i)().id;if(c.a.useEffect((function(){if(!r._id)if(t)e(V("wss://norma.nomoreparties.space/orders/all"));else{var n=me("Atoken");e(V("wss://norma.nomoreparties.space/orders?token=".concat(n)))}}),[]),!r._id&&i.length>0){var o=i.find((function(e){return e._id===s})),l=o.ingredients,d=o.name,u=o.number,j=o._id,m=o.status,_=o.createdAt,b=new Date(Date.parse(_)).toDateString(),x=n.filter((function(e){return l.includes(e._id)})),p=x.reduce((function(e,t){return e+t.price}),0);e(Fe({totalPrice:p,selectedIngredients:x,name:d,number:u,_id:j,status:m,createdTime:b}))}return Object(ne.jsx)("main",{className:Ue.a.main,children:r._id&&Object(ne.jsx)(ze,{})})}var Ve=n(103),We=n.n(Ve),He=n(21),Ke=n.n(He),Qe=n(195),Ye=n(27),Ze=n.n(Ye),qe=function(e){var t=e.ingredientData,n=e.id,r=c.a.useState(0),a=Object(se.a)(r,2),i=a[0],s=a[1],o=Oe(),l=Object(Y.g)(),d=Object(Y.h)(),u=he((function(e){return{constructorList:e.index.constructorList,selectedBun:e.index.selectedBun}})),j=u.constructorList,m=u.selectedBun;c.a.useEffect((function(){"bun"===t.type?m._id===n?s(2):s(0):s(j.filter((function(e){return e._id===n})).length)}),[j,m]);var _=Object(Qe.a)({type:"ingredient",item:{id:n,ingredientType:t.type},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),b=Object(se.a)(_,2),x=b[0].opacity,p=b[1];return Object(ne.jsx)("li",{ref:p,style:{opacity:x},className:Ze.a.ingredientsMenuItem,children:Object(ne.jsxs)("article",{onClick:function(){o(De(n)),l.push("/ingredients/".concat(n),{background:d})},className:Ze.a.ingredient,children:[0!==i&&Object(ne.jsx)("div",{className:Ze.a.count,children:Object(ne.jsx)($.Counter,{count:i,size:"default"})}),Object(ne.jsx)("img",{className:"".concat(Ze.a.ingredientImage," mb-1 mr-4 ml-4"),src:t.image,alt:t.name}),Object(ne.jsxs)("div",{className:"".concat(Ze.a.cost," mb-1"),children:[Object(ne.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(ne.jsx)($.CurrencyIcon,{type:"primary"})]}),Object(ne.jsx)("h3",{className:"".concat(Ze.a.name," text text_type_main-default"),children:t.name})]})})},$e=function(){var e=he((function(e){return e.index.ingredientsList})),t=c.a.useState("bun"),n=Object(se.a)(t,2),r=n[0],a=n[1],i=c.a.useRef(null),s=c.a.useRef(null),o=c.a.useRef(null),l=c.a.useRef(null);return Object(ne.jsxs)("section",{className:"".concat(Ke.a.burgerIngredients," pt-10"),children:[Object(ne.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(ne.jsxs)("div",{style:{display:"flex"},children:[Object(ne.jsx)($.Tab,{value:"bun",active:"bun"===r,onClick:a,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ne.jsx)($.Tab,{value:"sauce",active:"sauce"===r,onClick:a,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ne.jsx)($.Tab,{value:"main",active:"main"===r,onClick:a,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(ne.jsxs)("ul",{ref:i,onScroll:function(){if(i.current&&s.current&&o.current&&l.current){var e=i.current.getBoundingClientRect().y,t=s.current.getBoundingClientRect().y,n=o.current.getBoundingClientRect().y,r=l.current.getBoundingClientRect().y;Math.abs(t)-e<Math.abs(n)-e?a("bun"):Math.abs(n)-e<Math.abs(r)-e?a("sauce"):a("main")}},className:"".concat(Ke.a.menu," mt-10"),children:[Object(ne.jsxs)("li",{ref:s,className:"".concat(Ke.a.menuItem),children:[Object(ne.jsx)("h2",{className:"".concat(Ke.a.typeName," text text_type_main-medium mb-6"),children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ne.jsx)("ul",{className:"".concat(Ke.a.ingredientsMenu," mb-10"),children:e.map((function(e){return"bun"===e.type&&Object(ne.jsx)(qe,{id:e._id,ingredientData:e},e._id)}))})]}),Object(ne.jsxs)("li",{ref:o,className:Ke.a.menuItem,children:[Object(ne.jsx)("h2",{className:"".concat(Ke.a.typeName," text text_type_main-medium mb-6"),children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ne.jsx)("ul",{className:"".concat(Ke.a.ingredientsMenu," mb-10"),children:e.map((function(e){return"sauce"===e.type&&Object(ne.jsx)(qe,{id:e._id,ingredientData:e},e._id)}))})]}),Object(ne.jsxs)("li",{ref:l,className:Ke.a.menuItem,children:[Object(ne.jsx)("h2",{className:"".concat(Ke.a.typeName," text text_type_main-medium mb-6"),children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(ne.jsx)("ul",{className:"".concat(Ke.a.ingredientsMenu," mb-10"),children:e.map((function(e){return"main"===e.type&&Object(ne.jsx)(qe,{id:e._id,ingredientData:e},e._id)}))})]})]})]})},et=n(52),tt=n.n(et),nt=n(196),rt=n(28),ct=n.n(rt),at=n(105),it=n.n(at),st=function(e){var t=e.item,n=e.index,r=Oe(),c=Object(Qe.a)({type:"filling",item:{index:n},collect:function(e){return{isFillingDrag:e.isDragging()}}}),a=Object(se.a)(c,2),i=a[0].isFillingDrag,s=a[1],o=Object(nt.a)({accept:"filling",drop:function(e){var t;r((t=e.index,{type:h,toRemoveIndex:t,toInsertIndex:n}))},collect:function(e){return{isFillingHover:e.isOver()}}}),l=Object(se.a)(o,2),d=l[0].isFillingHover,u=l[1];function j(e){r(function(e){return{type:v,index:e}}(e))}var m=d?"90px":"0";return Object(ne.jsx)("li",{ref:u,style:{paddingTop:m},className:it.a.ingredient,children:!i&&Object(ne.jsxs)("article",{ref:s,children:[Object(ne.jsx)($.DragIcon,{type:"primary"}),Object(ne.jsx)($.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return j(n)}})]})})};function ot(){var e=Oe(),t=he((function(e){return{selectedBun:e.index.selectedBun,constructorList:e.index.constructorList}})),n=t.selectedBun,r=t.constructorList,c=Object(nt.a)({accept:"ingredient",drop:function(t){var n,r;e((n=t.id,r=t.ingredientType,{type:g,id:n,ingredientType:r}))},collect:function(e){return{isIngredientHover:e.isOver()}}}),a=Object(se.a)(c,2),i=a[0].isIngredientHover,s=a[1],o=i?"1px #8585AD solid":"none",l=Object(ne.jsx)("div",{className:ct.a.fillingChoi\u0441e,children:Object(ne.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u0447\u0438\u043d\u043a\u0443"})}),d=Object(ne.jsx)("div",{className:ct.a.bunChoi\u0441e,children:Object(ne.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"})});return Object(ne.jsxs)("div",{ref:s,style:{border:o},className:"".concat(ct.a.burger,"  ml-4 mb-10"),children:[n._id?Object(ne.jsx)("div",{className:"".concat(ct.a.bun),children:Object(ne.jsx)($.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(n.name," (\u0432\u0435\u0440\u0445)"),price:n.price,thumbnail:"".concat(n.image)})}):d,0!==r.length?Object(ne.jsx)("ul",{className:ct.a.ingredients,children:r.map((function(e,t){return"bun"!==e.type&&Object(ne.jsx)(st,{item:e,index:t},t)}))}):l,n._id?Object(ne.jsx)("div",{className:"".concat(ct.a.bun),children:Object(ne.jsx)($.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.name," (\u043d\u0438\u0437)"),price:n.price,thumbnail:"".concat(n.image)})}):d]})}function lt(){var e=c.a.useState(0),t=Object(se.a)(e,2),n=t[0],r=t[1],a=Object(Y.g)(),i=Oe(),s=Object(Y.h)(),o=he((function(e){return{user:e.auth.user,selectedBun:e.index.selectedBun,constructorList:e.index.constructorList}})),l=o.user,d=o.selectedBun,u=o.constructorList;return c.a.useEffect((function(){var e=d.price?2*d.price:0;r(u.reduce((function(e,t){return e+t.price}),e))}),[u,d]),Object(ne.jsxs)("section",{className:"".concat(tt.a.burgerConstructor," pt-25"),children:[Object(ne.jsx)(ot,{}),Object(ne.jsxs)("div",{className:"".concat(tt.a.confirmButton," mr-4"),children:[Object(ne.jsxs)("div",{className:"".concat(tt.a.total," mr-10 "),children:[Object(ne.jsx)("p",{className:"text text_type_digits-medium mr-2",children:n}),Object(ne.jsx)($.CurrencyIcon,{type:"primary"})]}),Object(ne.jsx)($.Button,{onClick:function(){if(0!==u.length&&d._id){var e=u.map((function(e){return e._id}));e.push(d._id),l.name?i(Je(e)):a.push("/login",{from:s})}else console.error("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b!")},type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})}var dt=n(53),ut=n.n(dt),jt=n.p+"static/media/done.e036971b.png",mt=function(){var e=he((function(e){return e.order.orderDetails}));return Object(ne.jsxs)("div",{className:ut.a.content,children:[Object(ne.jsx)("p",{className:"".concat(ut.a.orderNumber," text text_type_digits-large mb-8 mt-20"),children:e.order.number}),Object(ne.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(ne.jsx)("img",{src:jt,className:"".concat(ut.a.done," mb-15"),alt:"done icon"}),Object(ne.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(ne.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-15",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})};function _t(){var e=Oe(),t=he((function(e){return e.order.orderDetails}));return c.a.useEffect((function(){e(we())}),[]),Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("main",{className:We.a.main,children:[Object(ne.jsx)($e,{}),Object(ne.jsx)(lt,{})]}),t.success&&Object(ne.jsx)(Re,{isOpen:!!t.success,onClose:function(){e(Ge())},children:Object(ne.jsx)(mt,{})})]})}var bt=n(32),xt=n.n(bt);function pt(){var e=c.a.useState(""),t=Object(se.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),i=Object(se.a)(a,2),s=i[0],o=i[1],l=Oe(),u=Object(Y.h)().state;return he((function(e){return e.auth.user})).name?Object(ne.jsx)(Y.a,{to:(null===u||void 0===u?void 0:u.from)||"/"}):Object(ne.jsxs)("main",{className:xt.a.main,children:[Object(ne.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),l((t={email:n,password:s},function(e){return fetch("".concat(de,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(ue).then((function(t){e(xe(t.user)),localStorage.setItem("Rtoken",t.refreshToken),je("Atoken",_e(t.accessToken)),console.log("logged")}))})).catch((function(e){console.error(e)}))},className:"".concat(xt.a.form," mb-20"),children:[Object(ne.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return r(e.target.value)},value:n,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return o(e.target.value)},icon:"ShowIcon",value:s,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)($.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(ne.jsxs)("nav",{className:xt.a.nav,children:[Object(ne.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(ne.jsx)(d.c,{to:"/register",className:"".concat(xt.a.link," text text_type_main-default"),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(ne.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ne.jsx)(d.c,{to:"/forgot-password",className:"".concat(xt.a.link," text text_type_main-default"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})}var ft=n(42),Ot=n.n(ft);function ht(){var e=c.a.useState(""),t=Object(se.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),i=Object(se.a)(a,2),s=i[0],o=i[1],l=c.a.useState(""),u=Object(se.a)(l,2),j=u[0],m=u[1],_=Oe();return he((function(e){return e.auth.user})).name?Object(ne.jsx)(Y.a,{to:"/"}):Object(ne.jsxs)("main",{className:Ot.a.main,children:[Object(ne.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),_((t={email:n,password:s,name:j},function(e){fetch("".concat(de,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(ue).then((function(t){e(xe(t.user)),localStorage.setItem("Rtoken",t.refreshToken),je("Atoken",_e(t.accessToken))})).catch((function(e){return console.error(e)}))}))},className:"".concat(Ot.a.form," mb-20"),children:[Object(ne.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return m(e.target.value)},value:j,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return r(e.target.value)},value:n,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return o(e.target.value)},icon:"ShowIcon",value:s,name:"password",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)($.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(ne.jsx)("nav",{className:Ot.a.nav,children:Object(ne.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(ne.jsx)(d.c,{to:"/login",className:"".concat(Ot.a.link," text text_type_main-default"),children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})}var gt=n(43),vt=n.n(gt);function Nt(){var e=c.a.useState(""),t=Object(se.a)(e,2),n=t[0],r=t[1],a=he((function(e){return e.auth.user})),i=Object(Y.g)();return a.name?Object(ne.jsx)(Y.a,{to:"/"}):Object(ne.jsxs)("main",{className:vt.a.main,children:[Object(ne.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),(t={email:n},fetch("".concat(le,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(ue)).then((function(){i.push("/reset-password",{codeIsSended:!0})})).catch((function(e){return console.error(e)}))},className:"".concat(vt.a.form," mb-20"),children:[Object(ne.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return r(e.target.value)},value:n,name:"emailRestore",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)($.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(ne.jsx)("nav",{className:vt.a.nav,children:Object(ne.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ne.jsx)(d.c,{to:"/login",className:"".concat(vt.a.link," text text_type_main-default"),children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})}var yt=n(44),It=n.n(yt);function Ct(){var e=c.a.useState(""),t=Object(se.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),i=Object(se.a)(a,2),s=i[0],o=i[1],l=he((function(e){return e.auth.user})),u=Object(Y.h)().state;return l.name?Object(ne.jsx)(Y.a,{to:"/"}):(null===u||void 0===u?void 0:u.codeIsSended)?Object(ne.jsxs)("main",{className:It.a.main,children:[Object(ne.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),(t={password:n,token:s},fetch("".concat(le,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(ue)).then((function(e){return console.log(e.message)})).catch((function(e){return console.error(e)}))},className:"".concat(It.a.form," mb-20"),children:[Object(ne.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return r(e.target.value)},value:n,name:"newPassword",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",icon:"ShowIcon"})}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return o(e.target.value)},value:s,name:"code",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)($.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(ne.jsx)("nav",{className:It.a.nav,children:Object(ne.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ne.jsx)(d.c,{to:"/login",className:"".concat(It.a.link," text text_type_main-default"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})]}):Object(ne.jsx)(Y.a,{to:"/forgot-password"})}var Et=n(77),St=n.n(Et);function Lt(){var e=c.a.useState(""),t=Object(se.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),i=Object(se.a)(a,2),s=i[0],o=i[1],l=c.a.useState(""),d=Object(se.a)(l,2),u=d[0],j=d[1],m=he((function(e){return e.auth.user})),_=Oe(),b=function(){r(m.name),o(m.email)};c.a.useEffect((function(){b()}),[m]);return Object(ne.jsxs)("div",{className:St.a.aboutProfile,children:[Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return r(e.target.value)},icon:"EditIcon",value:n,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:function(e){return o(e.target.value)},icon:"EditIcon",value:s,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsx)("div",{className:"mb-6",children:Object(ne.jsx)($.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return j(e.target.value)},icon:"EditIcon",value:u,name:"password",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(ne.jsxs)("div",{className:St.a.buttons,children:[Object(ne.jsx)($.Button,{onClick:function(e){var t;e.preventDefault(),_((t={email:s,password:u,name:n},function(e){return be("".concat(de,"/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(me("Atoken"))},body:JSON.stringify(t)}).then((function(t){e(xe(t.user))}))})).then((function(){return b()}))},type:"primary",size:"large",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(ne.jsx)($.Button,{onClick:function(e){e.preventDefault(),b()},type:"primary",size:"large",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}var Tt=n(23),kt=n.n(Tt),Rt=n(22),Dt=n.n(Rt),wt=function(e){var t=e.statusBar,n=e.orderData,r=n.ingredients,a=n.name,i=n.number,s=n._id,o=n.status,l=n.createdAt,d=c.a.useState(),u=Object(se.a)(d,2),j=u[0],m=u[1],_=c.a.useState([]),b=Object(se.a)(_,2),x=b[0],p=b[1],f=c.a.useState(""),O=Object(se.a)(f,2),h=O[0],g=O[1],v=Object(Y.j)().url,N=he((function(e){return e.index.ingredientsList}));c.a.useEffect((function(){r&&N&&p(r.map((function(e){return N.find((function(t){return t._id===e}))})))}),[r]),c.a.useEffect((function(){r&&N&&m(x.reduce((function(e,t){return"bun"===t.type?e+2*t.price:e+t.price}),0))}),[x]),c.a.useEffect((function(){g(new Date(Date.parse(l)).toDateString())}),[]);var y=N.filter((function(e){return r.includes(e._id)})),I=y.splice(5),C=Object(Y.g)(),E=Object(Y.h)(),S=Oe();return x?Object(ne.jsxs)("article",{onClick:function(){S(Fe({totalPrice:j,selectedIngredients:x,name:a,number:i,_id:s,status:o,createdTime:h})),C.push("".concat(v,"/").concat(s),{background:E})},className:"".concat(Dt.a.card),children:[Object(ne.jsxs)("div",{className:Dt.a.header,children:[Object(ne.jsx)("p",{className:Dt.a.orderNumber,children:"#".concat(i)}),Object(ne.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:h})]}),Object(ne.jsxs)("div",{className:Dt.a.title,children:[Object(ne.jsx)("h3",{className:"text text_type_main-medium mb-2",children:a}),t&&Object(ne.jsx)("p",{style:{color:"done"===o?"#fff":"#00CCCC"},className:"text text_type_main-default",children:"done"===o?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"})]}),Object(ne.jsxs)("div",{className:Dt.a.list,children:[Object(ne.jsxs)("ul",{className:Dt.a.selectedIngredientsList,children:[y.map((function(e,t){return Object(ne.jsx)("li",{style:{zIndex:"".concat(5-t)},children:Object(ne.jsx)("img",{className:Dt.a.ingredientImage,src:e.image})},t)})),I.length>0&&Object(ne.jsx)("li",{children:Object(ne.jsx)("div",{className:Dt.a.restIngredients,style:{backgroundImage:"url(".concat(I[0].image,")")},children:I.length>1&&Object(ne.jsx)("p",{className:Dt.a.restIngredientsCount,children:"+".concat(I.length)})})})]}),Object(ne.jsxs)("div",{className:Dt.a.price,children:[Object(ne.jsx)("p",{className:"".concat(Dt.a.total," text text_type_digits-default"),children:j}),Object(ne.jsx)($.CurrencyIcon,{type:"primary"})]})]})]}):Object(ne.jsx)("div",{children:"error"})},Bt=n(106),Pt=n.n(Bt),At=function(e){var t=e.orders,n=e.statusBar;return Object(ne.jsx)("ul",{className:Pt.a.list,children:t.map((function(e,t){return e&&e.ingredients.length?Object(ne.jsx)(wt,{orderData:e,statusBar:n},t):Object(ne.jsx)("div",{children:"error"})}))})};function zt(){var e=Oe(),t=me("Atoken");c.a.useEffect((function(){e(V("wss://norma.nomoreparties.space/orders?token=".concat(t)))}),[]);var n=he((function(e){return{ordersInfo:e.ws.ordersInfo}})).ordersInfo.orders,r=void 0===n?[]:n,a=Array.from(r).reverse();return r.length?Object(ne.jsx)(At,{orders:a,statusBar:!0}):null}function Mt(){var e=Object(Y.j)(),t=e.url,n=e.path,r=Oe(),c=Object(Y.g)();return Object(ne.jsxs)("main",{className:kt.a.main,children:[Object(ne.jsxs)("nav",{className:"".concat(kt.a.profileNav," mr-15"),children:[Object(ne.jsxs)("ul",{className:"".concat(kt.a.navList," mb-20"),children:[Object(ne.jsx)("li",{children:Object(ne.jsx)(d.d,{exact:!0,to:"".concat(t),activeClassName:kt.a.activeLink,className:"".concat(kt.a.link," text text_type_main-medium text_color_inactive"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(ne.jsx)("li",{children:Object(ne.jsx)(d.d,{to:"".concat(t,"/orders"),activeClassName:kt.a.activeLink,className:"".concat(kt.a.link," text text_type_main-medium text_color_inactive"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(ne.jsx)("li",{children:Object(ne.jsx)("button",{onClick:function(){r(pe()),c.push("/")},className:"".concat(kt.a.exictButton," text text_type_main-medium text_color_inactive"),children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(ne.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(ne.jsx)("section",{className:kt.a.routeSide,children:Object(ne.jsxs)(Y.d,{children:[Object(ne.jsx)(Y.b,{exact:!0,path:n,children:Object(ne.jsx)(Lt,{})}),Object(ne.jsx)(Y.b,{exact:!0,path:"".concat(n,"/orders"),children:Object(ne.jsx)(zt,{})})]})})]})}var Ut=n(78),Ft=n.n(Ut);function Gt(){return Object(ne.jsx)("main",{className:Ft.a.main,children:Object(ne.jsx)("h1",{className:Ft.a.notFound,children:"PAGE NOT FOUND!"})})}var Jt=n(107),Xt=n.n(Jt);function Vt(){var e=he((function(e){return{ingredientsList:e.index.ingredientsList,ingredientListIsLoaded:e.index.ingredientListIsLoaded,ingredientListIsError:e.index.ingredientListIsError}})),t=e.ingredientsList,n=e.ingredientListIsLoaded,r=e.ingredientListIsError,a=Object(Y.g)(),i=Object(Y.i)().id,s=Oe();return c.a.useEffect((function(){t.length>0&&s(De(i))}),[t]),n?(n&&(r||0===t.length)&&a.goBack(),Object(ne.jsx)("main",{className:Xt.a.main,children:Object(ne.jsx)(Ie,{})})):null}var Wt=n(11),Ht=n.n(Wt);function Kt(){var e=Oe(),t=c.a.useState([]),n=Object(se.a)(t,2),r=n[0],a=n[1],i=c.a.useState([]),s=Object(se.a)(i,2),o=s[0],l=s[1];c.a.useEffect((function(){e(V("wss://norma.nomoreparties.space/orders/all"))}),[]);var d=he((function(e){return{ordersInfo:e.ws.ordersInfo}})).ordersInfo,u=d.orders,j=void 0===u?[]:u,m=d.total,_=void 0===m?null:m,b=d.totalToday,x=void 0===b?null:b;return c.a.useEffect((function(){var e=[],t=[];j.forEach((function(n){"done"===n.status&&t.length<10?t.push(n.number):e.length<10&&e.push(n.number)})),a(e),l(t)}),[]),Object(ne.jsxs)("main",{className:Ht.a.main,children:[Object(ne.jsx)("h1",{className:"".concat(Ht.a.title," text text_type_main-large mb-5"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ne.jsxs)("div",{className:Ht.a.grid,children:[Object(ne.jsx)("section",{children:Object(ne.jsx)("div",{className:Ht.a.orderList,children:j&&Object(ne.jsx)(At,{orders:j,statusBar:!1})})}),Object(ne.jsxs)("section",{className:Ht.a.ordersInfo,children:[Object(ne.jsxs)("div",{className:"".concat(Ht.a.statusLists," mb-15"),children:[Object(ne.jsxs)("ul",{className:Ht.a.statusList,children:[Object(ne.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),o.map((function(e,t){return Object(ne.jsx)("li",{className:"".concat(Ht.a.orderId," text text_type_digits-default"),style:{color:"#00CCCC"},children:e},t)}))]}),Object(ne.jsxs)("ul",{className:Ht.a.statusList,children:[Object(ne.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),r.map((function(e,t){"".concat(Ht.a.orderId," text text_type_digits-default")}))]})]}),Object(ne.jsxs)("div",{className:"".concat(Ht.a.stats," mb-6"),children:[Object(ne.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(ne.jsx)("p",{className:"".concat(Ht.a.number," text text_type_digits-large"),children:_&&_})]}),Object(ne.jsxs)("div",{className:Ht.a.stats,children:[Object(ne.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(ne.jsx)("p",{className:"".concat(Ht.a.number," text text_type_digits-large"),children:x&&x})]})]})]})]})}var Qt=function(){var e,t=Oe(),n=Object(Y.h)(),r=Object(Y.g)(),a=he((function(e){return{selectedIngredient:e.index.selectedIngredient,selectedOrder:e.order.selectedOrder}})),i=a.selectedIngredient,s=a.selectedOrder;c.a.useEffect((function(){t(Be()),t(fe())}),[]);var o=("PUSH"===r.action||"REPLACE"===r.action)&&(null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.background);return Object(ne.jsxs)("div",{className:q.a.app,children:[Object(ne.jsx)(re,{}),Object(ne.jsxs)(Y.d,{location:o||n,children:[Object(ne.jsx)(Y.b,{path:"/",exact:!0,children:Object(ne.jsx)(_t,{})}),Object(ne.jsx)(Y.b,{path:"/login",exact:!0,children:Object(ne.jsx)(pt,{})}),Object(ne.jsx)(Y.b,{path:"/register",exact:!0,children:Object(ne.jsx)(ht,{})}),Object(ne.jsx)(Y.b,{path:"/forgot-password",exact:!0,children:Object(ne.jsx)(Nt,{})}),Object(ne.jsx)(Y.b,{path:"/reset-password",exact:!0,children:Object(ne.jsx)(Ct,{})}),Object(ne.jsx)(ve,{exact:!0,path:"/profile/orders/:id",children:Object(ne.jsx)(Xe,{})}),Object(ne.jsx)(ve,{path:"/profile",children:Object(ne.jsx)(Mt,{})}),Object(ne.jsx)(Y.b,{path:"/ingredients/:id",children:Object(ne.jsx)(Vt,{})}),Object(ne.jsx)(Y.b,{exact:!0,path:"/feed",children:Object(ne.jsx)(Kt,{})}),Object(ne.jsx)(Y.b,{exact:!0,path:"/feed/:id",children:Object(ne.jsx)(Xe,{})}),Object(ne.jsx)(Y.b,{children:Object(ne.jsx)(Gt,{})})]}),Object(ne.jsxs)(Y.d,{children:[o&&(null===s||void 0===s?void 0:s._id)&&Object(ne.jsx)(Y.b,{path:"".concat(o.pathname,"/:id"),children:Object(ne.jsx)(Re,{isOpen:!!s,onClose:function(){t({type:D}),r.goBack()},children:Object(ne.jsx)(ze,{})})}),o&&(null===i||void 0===i?void 0:i._id)&&Object(ne.jsx)(Y.b,{path:"/ingredients/:id",children:Object(ne.jsx)(Re,{isOpen:!!i,onClose:function(){t(we()),r.goBack()},children:Object(ne.jsx)(Ie,{})})})]})]})},Yt=K();i.a.render(Object(ne.jsx)(c.a.StrictMode,{children:Object(ne.jsx)(o.a,{backend:l.a,children:Object(ne.jsx)(s.a,{store:Yt,children:Object(ne.jsx)(d.a,{children:Object(ne.jsx)(d.b,{basename:"/",children:Object(ne.jsx)(Qt,{})})})})})}),document.getElementById("root")),Q()},20:function(e,t,n){e.exports={content:"order-info_content__3244E",about:"order-info_about__1c18F",ingredientsList:"order-info_ingredientsList__17197",ingredient:"order-info_ingredient__30pRC",info:"order-info_info__11bVE",image:"order-info_image__14CQh",price:"order-info_price__sNxEd",total:"order-info_total__1krhW",footer:"order-info_footer__2VeuG"}},21:function(e,t,n){e.exports={burgerIngredients:"burger-ingredients_burgerIngredients__2i6ZI",menu:"burger-ingredients_menu__3KO37",menuItem:"burger-ingredients_menuItem__ts7QV",typeName:"burger-ingredients_typeName__2yVm2",ingredientsMenu:"burger-ingredients_ingredientsMenu__1XPlK",ingredientsMenuItem:"burger-ingredients_ingredientsMenuItem__1lZ4K"}},22:function(e,t,n){e.exports={card:"order-card_card__3zfNI",commonLink:"order-card_commonLink__1RaA0",header:"order-card_header__3u-8p",title:"order-card_title__a_E0-",orderNumber:"order-card_orderNumber__2fUwG",list:"order-card_list__M1IwB",price:"order-card_price__2Xi1K",total:"order-card_total__2e2DV",selectedIngredientsList:"order-card_selectedIngredientsList__2RXl7",restIngredients:"order-card_restIngredients__RAifv",restIngredientsCount:"order-card_restIngredientsCount__3ZDlL",ingredientImage:"order-card_ingredientImage__2yUZX"}},23:function(e,t,n){e.exports={main:"profile-page_main__XJiSd",profileNav:"profile-page_profileNav__VauUs",navList:"profile-page_navList__14jc5",link:"profile-page_link__3_7BM",activeLink:"profile-page_activeLink__3XZBI",exictButton:"profile-page_exictButton__1P0L2",routeSide:"profile-page_routeSide__13XKG"}},27:function(e,t,n){e.exports={ingredient:"ingredient_ingredient__3rYxz",count:"ingredient_count__2hF71",cost:"ingredient_cost__2m8om",name:"ingredient_name__3ZXIb",ingredientsMenuItem:"ingredient_ingredientsMenuItem__2on6R"}},28:function(e,t,n){e.exports={bun:"burger_bun__3xmCH",burger:"burger_burger__3XrHp","bunChoi\u0441e":"burger_bunChoi\u0441e__1JrYk","fillingChoi\u0441e":"burger_fillingChoi\u0441e__3VMGt",ingredients:"burger_ingredients__yfC9F"}},32:function(e,t,n){e.exports={main:"login-page_main__3oyDL",form:"login-page_form__2zTTD",nav:"login-page_nav__QCwgJ",link:"login-page_link__kpw7J"}},41:function(e,t,n){e.exports={content:"ingredient-details_content__WdJuD",title:"ingredient-details_title__2_5MB",image:"ingredient-details_image__H2-xP",nutrients:"ingredient-details_nutrients__3DmXA"}},42:function(e,t,n){e.exports={main:"register-page_main__1QI1i",form:"register-page_form__2Nx1S",nav:"register-page_nav__11E4S",link:"register-page_link__EPC7p"}},43:function(e,t,n){e.exports={main:"forgot-page_main__2oXU1",form:"forgot-page_form__1grfT",nav:"forgot-page_nav__bQ2n-",link:"forgot-page_link__3WXsf"}},44:function(e,t,n){e.exports={main:"reset-page_main__1IrJL",form:"reset-page_form__2FM4H",nav:"reset-page_nav__3mk1_",link:"reset-page_link__F32z4"}},52:function(e,t,n){e.exports={burgerConstructor:"burger-constructor_burgerConstructor__1Ei5R",confirmButton:"burger-constructor_confirmButton__3accQ",total:"burger-constructor_total__2z4fk"}},53:function(e,t,n){e.exports={content:"order-details_content__3oyjg",done:"order-details_done__1ZCH5",orderNumber:"order-details_orderNumber__7RKjN"}},75:function(e,t,n){e.exports={modal:"modal_modal__14tB-",closeButton:"modal_closeButton__GP740"}},77:function(e,t,n){e.exports={aboutProfile:"about-profile_aboutProfile__1mAEl",buttons:"about-profile_buttons__btYG_"}},78:function(e,t,n){e.exports={main:"not-found_main__3u66S",notFound:"not-found_notFound__32BmR"}},99:function(e,t,n){e.exports={app:"app_app__llV42"}}},[[189,1,2]]]);
//# sourceMappingURL=main.8773c38d.chunk.js.map